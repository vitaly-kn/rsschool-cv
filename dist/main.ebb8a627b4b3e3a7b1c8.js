(()=>{"use strict";var __webpack_modules__={477:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{XF:()=>getRandomInt,OU:()=>getRandomDropOffset,T4:()=>getRandomExpression});const operators=[{name:"add",operation:"+",display:"+"},{name:"sub",operation:"-",display:"-"},{name:"mul",operation:"*",display:"x"},{name:"div",operation:"/",display:"รท"}],FIRST_TRACK_OFFSET=5,TRACK_STEP=10,MAX_TRACKS=9,MAX_OPERAND_VALUE=99;function getRandomInt(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function getRandomDropOffset(){let e=getRandomInt(0,MAX_TRACKS-1);return`${FIRST_TRACK_OFFSET+e*TRACK_STEP}%`}function getRandomExpression(difficulty=1,maxOperand=MAX_OPERAND_VALUE,operationsMask={add:!0,sub:!0,mul:!0,div:!0}){let operator;do{operator=getRandomInt(0,operators.length-1)}while(!operationsMask[operators[operator].name]);difficulty>maxOperand&&(difficulty=1);let operand1=getRandomInt(0,Math.round(maxOperand/difficulty)),operand2,expression,result;if("+"===operators[operator].operation||"*"===operators[operator].operation)operand2=getRandomInt(0,Math.round(maxOperand/difficulty));else if("-"===operators[operator].operation)operand2=getRandomInt(0,Math.round(maxOperand/difficulty)),operand1<operand2&&([operand1,operand2]=[operand2,operand1]);else if(operand1){let e=getDivisors(operand1);operand2=e[getRandomInt(0,e.length-1)]}else operand2=getRandomInt(1,Math.round(maxOperand/difficulty));return expression=`${operand1} ${operators[operator].operation} ${operand2}`,result=eval(expression),{operand1,operation:operators[operator].display,operand2,result}}function getDivisors(e){let t=[];for(let s=1;s<=Math.floor(Math.sqrt(e));s++)e%s||(t.push(s),t.push(Math.trunc(e/s)));return t}}},__webpack_module_cache__={};function __webpack_require__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.d=(e,t)=>{for(var s in t)__webpack_require__.o(t,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{class e{constructor(e,t=3e3){this.cadence=t,this.isPaused=!0,this.callback=e,this.timerID}_run(){this.isPaused||(this.callback(),this.timerID=setTimeout(this._run.bind(this),this.cadence))}start(){this.isPaused&&(this.isPaused=!1,this._run())}stop(){this.isPaused=!0,clearTimeout(this.timerID)}toggle(){return this.isPaused?(this.start(),!0):(this.stop(),!1)}setCadence(e){this.cadence=e}getCadence(){return this.cadence}}var t=__webpack_require__(477);const s={classApplicationSelector:".application",classDropContainerSelector:".drop-container",classListSeaLevels:["sea-level1","sea-level2","flood"],classRestart:"restart",classDrop:"drop",classBonus:"bonus",classDropPause:"drop-pause",animationDropFall:"drop-fall",classBang:"bang",classScoreSelector:".score-amount",classScreenSelector:".screen",classKeySelector:".key",classKeyActive:"key-active",classModalSelector:".modal-container",classShowModal:"show-modal",classShowSettings:"show-settings",classShowGameOver:"show-game-over",classShowHowto:"show-howto",settingsOperationsCheckboxSelector:'.operations input[type="checkbox"]',classMaxOperandSelector:".max-operand",idTotalDrops:"total-drops",idResolvedDrops:"resolved-drops",idResolutionRate:"resolution-rate",idMistakes:"mistakes",idAccuracy:"accuracy",idCloseGameOver:"close-gameover",idCloseSettings:"close-settings",attrValue:"data-value",attrValueEnter:"enter",attrValueDelete:"delete",attrValueClear:"clear",attrKey:"key",attrKeyNumpad:"key-numpad",idFullscreen:"fullscreen",idStart:"start",idPause:"pause",idSettings:"settings",idSound:"sound",idHowTo:"howto",eventResult:"result",eventPause:"pause",eventResume:"resume",eventRiseSeaLevel:"risesealevel"},a=3e3;let n,o=!1,r=!1,l=r,c=!1,d=0,i=!1,u=-1,p=99,m=!0,v=!1,h=new e((function(){let e=function(){const e=(0,t.T4)(z.difficulty,p,K),a=document.createElement("div");return a.style.left=(0,t.OU)(),a.classList.add(s.classDrop),a.insertAdjacentHTML("afterbegin",`<div class="operator">${e.operation}</div>\n     <div class=operands>\n     <div>${e.operand1}</div>\n     <div>${e.operand2}</div>\n     </div>`),a.addEventListener("animationend",(e=>{e.stopPropagation(),e.animationName===s.animationDropFall&&(H.playGameSfx(),g.dispatchEvent(new CustomEvent(s.eventRiseSeaLevel))),e.currentTarget.parentNode?.removeChild(e.currentTarget)}),{once:!0}),a.result=e.result,a.bang=function(){a.classList.add(s.classBang),X.playGameSfx()},a}();i||5!==(0,t.XF)(0,5)||(e.classList.add(s.classBonus),n=e.result,i=!0),g.appendChild(e),J.totalDrops++,V.playGameSfx()}),a),_=new e((function(){g.children.length&&function(e){let t=(e+"").split("");t.push("enter");let a=0;!function e(){if(a&&document.querySelector(`${s.classKeySelector}[${s.attrValue}="${t[a-1]}"]`).classList.remove(s.classKeyActive),a<t.length){let n=document.querySelector(`${s.classKeySelector}[${s.attrValue}="${t[a]}"]`);n.classList.add(s.classKeyActive),a++,n.click(),setTimeout(e,400)}}()}(g.children[(0,t.XF)(0,g.children.length-1)].result)}),4500);const f=document.querySelector(s.classApplicationSelector),g=document.querySelector(s.classDropContainerSelector),y=document.querySelector(s.classScoreSelector),S=document.querySelector(s.classScreenSelector),E=document.querySelectorAll(s.classKeySelector),L=document.getElementById(s.idFullscreen),x=document.getElementById(s.idStart),w=document.getElementById(s.idPause),C=document.getElementById(s.idSettings),k=document.getElementById(s.idSound),b=document.getElementById(s.idHowTo),R=document.querySelector(s.classModalSelector),T=document.getElementById(s.idTotalDrops),M=document.getElementById(s.idResolvedDrops),D=document.getElementById(s.idResolutionRate),I=document.getElementById(s.idMistakes),O=document.getElementById(s.idAccuracy),A=document.getElementById(s.idCloseGameOver),B=document.querySelectorAll(s.settingsOperationsCheckboxSelector),q=document.querySelector(s.classMaxOperandSelector),P=document.getElementById(s.idCloseSettings);y.textContent=0,g.addEventListener(s.eventResult,(function(e){let t=!1;for(let s of g.children)e.detail.result!==n&&s.result!==e.detail.result||(F.playGameSfx(),t=!0,y.textContent=+y.textContent+10+d,d++,J.resolvedDrops++,s.bang());z.upgrade(),e.detail.result===n&&se(),t||(d=0,J.mistakes++,U.playGameSfx())})),g.addEventListener(s.eventPause,(function(e){e.currentTarget.classList.add(s.classDropPause)})),g.addEventListener(s.eventResume,(function(e){e.currentTarget.classList.remove(s.classDropPause)})),g.addEventListener(s.eventRiseSeaLevel,(function(e){u++,e.currentTarget.classList.add(s.classListSeaLevels[u]),j.playGameSfx(),se(),Z()})),g.addEventListener("animationend",ae),g.addEventListener("transitionend",(function(){u===s.classListSeaLevels.length-1&&(h.stop(),N.playGameSfx(),m=!0,R.classList.add(s.classShowModal),R.classList.add(s.classShowGameOver),T.textContent=J.totalDrops,M.textContent=J.resolvedDrops,D.textContent=J.resolutionRate(),I.textContent=J.mistakes,O.textContent=J.accuracy())})),E.forEach((e=>e.addEventListener("click",Q))),window.addEventListener("keydown",(function(e){if(m)return;let t=Y(e);t&&(t.classList.add(s.classKeyActive),t.click())})),window.addEventListener("keyup",(function(e){if(m)return;let t=Y(e);t&&t.classList.remove(s.classKeyActive)})),x.addEventListener("click",(function(e){e.currentTarget.blur(),c?(h.stop(),m=!0,Z(),s.classListSeaLevels.forEach((e=>g.classList.remove(e))),g.classList.add(s.classRestart)):(c=!0,m=!1,z.reset(),J.reset(),x.textContent="Restart",W.playGameSfx(),h.start())})),w.addEventListener("click",(function(e){e.currentTarget.blur(),c&&(h.toggle()?(e.currentTarget.textContent="Pause",ee()):(e.currentTarget.textContent="Resume",te()))})),L.addEventListener("click",(function(e){e.currentTarget.blur(),o?document.exitFullscreen():f.requestFullscreen()})),C.addEventListener("click",(function(e){e.currentTarget.blur(),l=r,c?(h.stop(),te()):m=!0,R.classList.add(s.classShowModal),R.classList.add(s.classShowSettings)})),k.addEventListener("click",(function(e){e.currentTarget.blur(),$=!$,$?(e.currentTarget.textContent="Sound : On",c&&W.play()):(e.currentTarget.textContent="Sound : Off",W.pause())})),b.addEventListener("click",(function(){c||(v=!0,R.classList.add(s.classShowModal),R.classList.add(s.classShowHowto),z.reset(),J.reset(),_.start(),h.start(),R.addEventListener("click",oe,{once:!0}))})),document.addEventListener("fullscreenchange",(function(){o?(o=!1,L.textContent="Fullscreen"):(o=!0,L.textContent="Window")})),A.addEventListener("click",(function(){R.classList.remove(s.classShowModal),R.classList.remove(s.classShowGameOver),s.classListSeaLevels.forEach((e=>g.classList.remove(e))),ae()})),B.forEach((e=>e.addEventListener("change",ne))),q.addEventListener("change",(function(e){let t=Math.floor(e.currentTarget.value);t>99?t=99:t<1&&(t=1),e.currentTarget.value=t,p=t})),P.addEventListener("click",(function(){R.classList.remove(s.classShowModal),R.classList.remove(s.classShowSettings),!l&&c?(ee(),h.start()):m=!1}));let K={add:!0,sub:!0,mul:!0,div:!0},$=!0;HTMLAudioElement.prototype.playGameSfx=function(){if($)return this.play()};const G=document.getElementById("sound-key"),F=document.getElementById("sound-bonus"),V=document.getElementById("sound-drop-start"),H=document.getElementById("sound-drop-fall"),X=document.getElementById("sound-drop-bang"),N=document.getElementById("sound-game-over"),U=document.getElementById("sound-mistake"),j=document.getElementById("sound-sea-rise"),W=document.getElementById("sound-theme");let z={upgrade(){this.difficulty=Math.max(8-Math.trunc(+y.textContent/200),1),h.setCadence(Math.max(a-250*Math.trunc(+y.textContent/200),500))},reset(){this.difficulty=8,h.setCadence(a)}},J={accuracy(){return this.resolvedDrops?`${Math.round(this.resolvedDrops/(this.resolvedDrops+this.mistakes)*100)}%`:"0%"},resolutionRate(){return this.resolvedDrops?`${Math.round(this.resolvedDrops/this.totalDrops*100)}%`:"0%"},reset(){this.mistakes=0,this.totalDrops=0,this.resolvedDrops=0}};function Q(e){if(e.currentTarget.blur(),G.playGameSfx(),(!c||r)&&!v)return;const t=e.currentTarget.getAttribute(s.attrValue);if(t===s.attrValueEnter){let e=new CustomEvent(s.eventResult,{detail:{result:+S.textContent}});S.textContent="",g.dispatchEvent(e)}else t===s.attrValueClear?S.textContent="":t===s.attrValueDelete?S.textContent=S.textContent.substring(0,S.textContent.length-1):S.textContent.length<3&&(S.textContent+=t)}function Y(e){return document.querySelector(`${s.classKeySelector}[data-${s.attrKey}="${e.keyCode}"]`)||document.querySelector(`${s.classKeySelector}[data-${s.attrKeyNumpad}="${e.keyCode}"]`)}function Z(){g.innerHTML=""}function ee(){r=!1,m=!1,g.dispatchEvent(new CustomEvent(s.eventResume))}function te(){r=!0,m=!0,g.dispatchEvent(new CustomEvent(s.eventPause))}function se(){n=void 0,i=!1,d=0}function ae(){Z(),W.pause(),y.textContent=0,S.textContent="",c=!1,u=-1,g.classList.remove(s.classRestart),se(),x.textContent="Start",w.textContent="Pause",ee(),m=!0,h.stop()}function ne(){let e,t=0;B.forEach((s=>{s.checked?(s.disabled=!1,K[s.value]=!0,e=s,t++):K[s.value]=!1})),1===t&&(e.disabled=!0)}function oe(e){_.stop(),h.stop(),v=!1,Z(),e.currentTarget.classList.remove(s.classShowModal),e.currentTarget.classList.remove(s.classShowHowto),s.classListSeaLevels.forEach((e=>g.classList.remove(e))),e.currentTarget.classList.contains(s.classShowGameOver)?(e.currentTarget.classList.remove(s.classShowGameOver),ae()):g.classList.add(s.classRestart)}})()})();